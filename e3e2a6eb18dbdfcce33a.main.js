(()=>{"use strict";var e,t={3224:(e,t,n)=>{n(8594),n(5666);var r=n(7294),a=n(3935),l=n(9226),o=n(9075),c=n(3894);function i(e){switch(e.toLowerCase()){case"clear":return"sun";default:return"cloud"}}n(4500);var u=(0,o.oM)({name:"app",initialState:{theme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",units:"celsius"},reducers:{changeTheme:function(e,t){e.theme=t.payload},changeUnits:function(e,t){e.units=t.payload}}}),s=u.actions,m=s.changeTheme,f=s.changeUnits;const p=u.reducer;function h(e,t,n,r,a,l,o){try{var c=e[l](o),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function o(e){h(l,r,a,o,c,"next",e)}function c(e){h(l,r,a,o,c,"throw",e)}o(void 0)}))}}var d="https://api.openweathermap.org/data/2.5";function g(e,t){return y.apply(this,arguments)}function y(){return(y=v(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(d,"/find?lat=").concat(t,"&lon=").concat(n,"&cnt=1&appid=").concat("4cc8f7b1e63c376f8d46b4bea3a06e7b"));case 3:return r=e.sent,e.abrupt("return",r.json());case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function E(e,t,n,r,a,l,o){try{var c=e[l](o),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}var b=(0,o.oM)({name:"geo",initialState:{permission:"",position:null,weather:null,error:null},reducers:{changeState:function(e,t){return t.payload}}}),w=b.actions.changeState;const O=b.reducer;function Z(e,t,n,r,a,l,o){try{var c=e[l](o),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=(0,o.oM)({name:"favourites",initialState:{cities:[],status:"idle",error:null},reducers:{addCity:function(e,t){e[t.payload.name]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.payload)},removeCity:function(e,t){delete e[t]}}});function x(e){return e.favourites.cities}function C(e,t){return e.favourites.cities.find((function(e){return e.name===t}))}(0,o.hg)("favourites/loadCitiesData",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cities.map((function(e){return C(e.name)})),e.next=3,Promise.all(n);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function o(e){Z(l,r,a,o,c,"next",e)}function c(e){Z(l,r,a,o,c,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}());var I=k.actions;I.addCity,I.removeCity;const R=k.reducer;var S=function(e){return function(t){return function(n){var r=t(n);return localStorage.setItem("store",JSON.stringify(e.getState())),r}}},F=(0,o.xC)({reducer:{app:p,geo:O,favourites:R},devTools:!1,preloadedState:JSON.parse(localStorage.getItem("store")||"{}"),middleware:function(e){var t=e();return t.push(c.Z),t.push(S),t}}),M=n(5712),N=n(4593),T=n(3626),_=n(5697),q=n.n(_),D=n(9445),L=n(5382),z=n(9574),A=n(322);function H(){return r.createElement(A.Z,null,r.createElement(A.Z.Header,{image:!0},r.createElement(A.Z.Line,null),r.createElement(A.Z.Line,null)),r.createElement(A.Z.Paragraph,null,r.createElement(A.Z.Line,{length:"medium"}),r.createElement(A.Z.Line,{length:"short"})))}var J=1023,U=100;function B(e){var t=e.name,n=(0,l.v9)((function(e){return e.app.units})),a=(0,l.v9)(C(t)),o=a.loading,c=a.weather;if(o)return r.createElement(T.Z,null,r.createElement(T.Z.Content,null,r.createElement(H,null)));var u=c.weather[0].main,s=o?null:function(e,t){switch(t){case"fahrenheit":return"".concat(Math.floor(9*e/5-459.67)," F째");case"celsius":return"".concat(Math.floor(e-273.15)," C째");default:return"".concat(e," K")}}(c.main.temp,n);return r.createElement(T.Z,null,r.createElement(T.Z.Content,null,r.createElement("div",{style:{float:"right"}},r.createElement(D.Z,null,s),r.createElement(L.Z,{style:{float:"right"},size:"big",name:i()})),r.createElement(T.Z.Header,null,t),r.createElement(T.Z.Meta,null,u),r.createElement(T.Z.Description,null,r.createElement(z.Z,null,r.createElement(z.Z.Item,null,r.createElement(z.Z.Icon,{name:"thermometer half"}),r.createElement(z.Z.Content,null,s," (feels like ",s,")")),r.createElement(z.Z.Item,null,r.createElement(z.Z.Icon,{name:"theme"}),r.createElement(z.Z.Content,null,U," %")),r.createElement(z.Z.Item,null,r.createElement(z.Z.Icon,{name:"cloud download"}),r.createElement(z.Z.Content,null,J," hPa"))))))}B.propTypes={name:q().string.isRequired,loading:q().bool};const G=B,K=function(){var e=(0,l.v9)(x);return r.createElement(T.Z.Group,{centered:!0},e.map((function(e){return r.createElement(G,{key:e.id,city:e})})))};var W=n(4309),Q=n(7624),V=n(6005),X=n(3352),Y=["leftItem","rightItem","onChange","value"];function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ee(e){var t=e.leftItem,n=e.rightItem,a=e.onChange,l=e.value,o=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Y);return r.createElement("div",$({className:"rw-toggle-left-right"},o),r.createElement("div",{className:"rw-toggle-left-right_left-item"},t.label),r.createElement("div",{className:"rw-toggle-left-right_toggle"},r.createElement(X.Z,{toggle:!0,checked:l===n.value,onChange:function(e,r){var l=r.checked;return a(l?n.value:t.value)}})),r.createElement("div",{className:"rw-toggle-left-right_right-item"},n.label))}ee.propTypes={leftItem:q().shape({label:q().node,value:q().any}).isRequired,rightItem:q().shape({label:q().node,value:q().any}).isRequired,onChange:q().func.isRequired,value:q().any.isRequired};const te=ee;function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function re(e){var t=(0,l.v9)((function(e){return e.app.theme})),n=(0,l.I0)();return r.createElement(te,ne({},e,{value:t,onChange:function(e){return n(m(e))},leftItem:{label:r.createElement(L.Z,{name:"sun"}),value:"light"},rightItem:{label:r.createElement(L.Z,{name:"moon"}),value:"dark"}}))}function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function le(e){var t=(0,l.v9)((function(e){return e.app.units})),n=(0,l.I0)();return r.createElement(te,ae({},e,{value:t,onChange:function(e){return n(f(e))},leftItem:{label:"C째",value:"celsius"},rightItem:{label:"F째",value:"fahrenheit"}}))}function oe(){return r.createElement(W.Z,{style:{padding:"1em"},stackable:!0},r.createElement(W.Z.Row,null,r.createElement(W.Z.Column,{width:5},r.createElement(D.Z,null,r.createElement(Q.Z,{src:"./logo.png",style:{background:"#FFF",borderRadius:"5px",padding:".2em"}}),"React Weather")),r.createElement(W.Z.Column,{textAlign:"center",width:6},r.createElement(V.Z,{fluid:!0,placeholder:"Enter city name...",icon:"search"})),r.createElement(W.Z.Column,{textAlign:"right",width:5},r.createElement(le,{style:{marginRight:"1em"}}),r.createElement(re,null))))}var ce=n(5766);function ie(){var e=(0,l.I0)(),t=(0,l.v9)((function(e){return e.geo.permission})),n=(0,l.v9)((function(e){return e.geo.position})),a=(0,l.v9)((function(e){return e.geo.weather}));return(0,r.useEffect)((function(){""===t&&e(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,a,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.permissions.query({name:"geolocation"});case 2:if(n=e.sent,r={permission:n.state,position:null,weather:null},!["granted","prompt"].includes(n.state)){e.next=26;break}return e.prev=5,e.next=8,new Promise((function(e,t){navigator.geolocation.getCurrentPosition(e,t)}));case 8:a=e.sent,r.position={lat:a.coords.latitude,lon:a.coords.longitude},e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),r.error="cannot get geolocation";case 15:return e.prev=15,e.next=18,g(a.coords.latitude,a.coords.longitude);case 18:l=e.sent,r.weather=l,e.next=26;break;case 22:e.prev=22,e.t1=e.catch(15),console.error(e.t1),r.error="cannot find nearest city";case 26:t(w(r));case 27:case"end":return e.stop()}}),e,null,[[5,12],[15,22]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function o(e){E(l,r,a,o,c,"next",e)}function c(e){E(l,r,a,o,c,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}())}),[e,t]),r.createElement(ce.Z,null,function(){switch(t){case"":return"unknown";case"denied":return"denied";case"prompt":return"prompt";case"granted":return r.createElement(r.Fragment,null,r.createElement("div",null,"lat: ",n.lat),r.createElement("div",null,"lon: ",n.lon),r.createElement("div",null,a.list.length?a.list[0].name:"-"));default:return null}}())}const ue=function(){var e=(0,l.v9)((function(e){return e.app.theme}));return r.createElement(r.Fragment,null,r.createElement(N.Z,null,"dark"===e&&r.createElement("link",{rel:"stylesheet",type:"text/css",href:"dark.css"})),r.createElement(oe,null),r.createElement(M.Z,{className:"rw-main-container"},r.createElement(ie,null),r.createElement(K,null)))};var se=function(){return r.createElement(l.zt,{store:F},r.createElement(ue,null))};a.render(r.createElement(se,null),document.getElementById("app"))}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var l=n[e]={exports:{}};return t[e].call(l.exports,l,l.exports,r),l.exports}r.m=t,e=[],r.O=(t,n,a,l)=>{if(!n){var o=1/0;for(s=0;s<e.length;s++){for(var[n,a,l]=e[s],c=!0,i=0;i<n.length;i++)(!1&l||o>=l)&&Object.keys(r.O).every((e=>r.O[e](n[i])))?n.splice(i--,1):(c=!1,l<o&&(o=l));if(c){e.splice(s--,1);var u=a();void 0!==u&&(t=u)}}return t}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[n,a,l]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,l,[o,c,i]=n,u=0;for(a in c)r.o(c,a)&&(r.m[a]=c[a]);if(i)var s=i(r);for(t&&t(n);u<o.length;u++)l=o[u],r.o(e,l)&&e[l]&&e[l][0](),e[o[u]]=0;return r.O(s)},n=self.webpackChunkreact_weather=self.webpackChunkreact_weather||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[101],(()=>r(3224)));a=r.O(a)})();